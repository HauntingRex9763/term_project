
---
title: "STAT 1910 Project Data Proposal"
team: "team 01"
author(s): "Dale Urquhart"
date: "Last updated on `r Sys.Date()`"
output:
  html_document:
    fig_caption: yes
    theme: lumen
    toc: yes
    toc_depth: 2
    df_print: kable
    toc_float:
      collapsed: no
---

```{r, message=FALSE}
# Load all packages here:
library(readr)
library(dplyr)
library(ggplot2)
library(janitor)

# Set seed value of random number generator to get "replicable" random numbers.
# The choice of seed value of 76 was an arbitrary one on my part.
set.seed(76)
```


# Big-picture

## Research question

How does GPA and region of the university effect salary for engineers?


## Description of data

Extensive data on engineering graduates from diffrent states of India containing both quantitative and qualitative data measuring various factors which may play a role on their post-graduate salary.The dataset was attained from https://www.kaggle.com/datasets/manishkc06/engineering-graduate-salary-prediction - dataset made publicly available from https://www.hbs.edu/faculty/Pages/item.aspx?num=50096



## Load data into R

_Include the code to load your data here. If your data is not confidential nor is it private in nature, consider publishing it as a `.csv` file on Google Sheets as in the code chunk below; instructions on how to do this are in Steps 1-6 [here](https://twitter.com/rudeboybert/status/1055821846539591680). If the data shouldn't be published online, then please submit the spreadsheet file on Moodle._

```{r, message=FALSE}
df <- read_csv("https://docs.google.com/spreadsheets/d/e/2PACX-1vQ9x2onmfCFbaBW0DCiTbhpac5m7SpyP3RgcbGnFm5B3twBW8CUzZEqqVtxObI2xEGKo9HZ4M5j7oyS/pub?gid=776035216&single=true&output=csv")
```



## Clean variable names

_Piping your data frame into the `clean_names()` function from the `janitor` package will clean your variable names, making them easier to work with._

```{r}
df <- df %>%
    clean_names()
```


## Explore your data

_Be sure to explore your data. Note that `eval=FALSE` is set so that R Markdown doesn't "evaluate" this code chunk, i.e. it will ignore it in the ultimate `.html` report. You should run this code on your own, but not in the ultimate `.html` report._

```{r, eval = FALSE}
glimpse(df)

df %>%
    nrow()

df %>%
    ls()

glimpse(df)
```



***



# Variables

## Identification variable

_What is your identification (ID) variable (if you have one)?_
The identification variable is id

## Outcome variable

_What is your outcome variable $y$? What are its units of measurement?_
The outcome variable is the post-graduate salary in Indian Rupees (INR).

## Numerical explantory variable

_What is your numeric explanatory variable? What are its units of measurement?_
The numeric explanatory variable is college_gpa, representing the grade of the student.

## Categorical explantory variable

_What is your categorical explanatory variable? Does it have between 3 and 5 levels. Please list the different levels._
college_state is the categorical variable, representing the region the schools the levels are [North, South, West, East, Central].


***


# Rows/observations

## Observational units

_What is the observational unit of your data? In other words, what does each row in your data represent?_
Each observational unit represents data for a graduated engineering student.

## Sample size

_How many rows/cases are in the data i.e. what is the sample size? Is the sample size at least 50?_
There is 2998 rows in this dataset.

***


# Preview of data

## Pare down variables

_`select()` the following variables **in this order** and drop all others. Eliminating all unnecessary variables will making visually exploring the raw values less taxing mentally, as we'll have less data to look at._

1. _The identification variable_
1. _The outcome variable $y$_
1. _The numerical explanatory variable_
1. _The categorical explanatory variable_
1. _Optional: any other variable you find interesting_


id, salary, college_gpa, college_state, and gender were selected out of the dataset, also college_state was changed from a by-state organization to grouped by region. Some variables were renamed for clarity and simplification.

```{r}
# Compacting states into regions of North, South, West, East, Central
df$college_state[df$college_state == 'Chhattisgarh' | df$college_state == 'Madhya Pradesh'] <- 'Centeral'

df$college_state[df$college_state == 'Delhi' | df$college_state == 'Haryana' | df$college_state == 'Jammu and Kashmir' | df$college_state == 'Himachal Pradesh' | df$college_state == 'Uttar Pradesh' | df$college_state == 'Punjab' | df$college_state == 'Uttarakhand' | df$college_state == 'Rajasthan' | df$college_state == 'Ladakh' | df$college_state == 'Chandigarh' | df$college_state == 'Union Territory' | df$college_state == 'Meghalaya'] <- 'North'

df$college_state[df$college_state == 'Tamil Nadu' | df$college_state == 'Kerala' | df$college_state == 'Karnataka' | df$college_state == 'Andhra Pradesh' | df$college_state == 'Telangana' | df$college_state == 'Puducherry'] <- 'South'

df$college_state[df$college_state == 'Maharashtra' | df$college_state == 'Goa' | df$college_state == 'Gujarat' | df$college_state == 'Assam' | df$college_state == 'Drissa' | df$college_state == 'Sikkim' | df$college_state == 'Goa'] <- 'West'

df$college_state[df$college_state == 'Bihar' | df$college_state == 'Jharkhand' | df$college_state == 'Odisha' | df$college_state == 'Orissa' | df$college_state == 'West Bengal'] <- 'East'

df <- rename(df, gpa = college_gpa)
df <- rename(df, region = college_state)

df <- df %>% 
    select(id, salary, gpa, region, gender)

glimpse(df)
```


## Preview data

_Display a random sample of 5 rows of your data frame by piping it into the `sample_n(5)` function from the `dplyr` package . You'll get the same 5 rows everytime you knit this document and hence replicable results because we set the seed value of the random number generator in the first code chunk above._

```{r}
df %>%
    sample_n(5)
```

***
# PART 2




# Exploratory data analysis

_Let's do an little exploratory data analysis._

## Inspect for missing values

_Address missing values._
There is no null values in this dataset, however GPAs on a diffrent measurment system from 1-10 were omitted

```{r}
df$gpa[df$gpa < 50] <- NA
colSums(is.na(df))
df <- na.omit(df)
```


## Summary statistics

_Compute some quick summary statistics of the outcome variable and comment._
The majority of engineering students are from the northern region, as it is the largest.
There is a weak negative correlation between GPA and salaries for graduates out of the central region, and a weak positive correlation between GPA and salaries for engineering students out of the north, south, west, and east regions.
```{r}
df %>% 
  group_by(region) %>% 
  summarize(n = n(), 
            correlation = cor(salary, gpa),
            mean = mean(salary, na.rm = TRUE), 
            median = median(salary, na.rm = TRUE), 
            sd = sd(salary, na.rm = TRUE))
```


## Histogram of outcome variable 

_Visualize the distribution of the outcome variable using a histogram and comment._
This visualizes the average starting salary fir engineering 
```{r, fig.cap = "Figure 1. Histogram displaying the distribution of salaries for engineers.", fig.align = "center", fig.width=16/2, fig.height=9/2}
ggplot(data = df, aes(x = salary)) +
    geom_histogram() +
    labs(x = "Salaries", y = "Counts") 


```



## Scatterplot 

_Visualize the relationship of the outcome variable and the numerical explanatory variable using a scatterplot and comment._
There is a positive correlation between GPAs and salaries for engineering graduates.

```{r, fig.cap = "Figure 2. Relationship between college GPA and salary for engineering students", fig.align = "center", fig.width=16/2, fig.height=9/2}
ggplot(data = df, aes(x = gpa, y = salary)) +
    geom_point() +
    labs(x = "GPA", y = "Salaries") +
    geom_smooth(method = "lm", se = FALSE )
```


## Boxplot

_Visualize the relationship of the outcome variable and the categorical explanatory variable using a scatterplot and comment._
Salaries are generally the same throughout the regions; however larger salaries more commonly come out of the northern region.

```{r, fig.cap = "Figure 3. Relationship between region of school attended and salary for engineering students.", fig.align = "center", fig.width=16/2, fig.height=9/2}
ggplot(data = df, aes(x = region, y = salary, fill = region)) +
    geom_boxplot() +
    labs(x = "Region", y = "Salaries") 
```

## Region colored scatterplot

_Visualize the relationship of the outcome variable and both explanatory variables using a colored scatterplot and comment._
The salaries in the central region are the least affected by GPA, with a -0.01 correlation, and the eastern region carries the strongest corrolation between GPAs and salaries at a correlation of 0.21.
```{r, fig.cap = "Figure 4. Relationship between salary and GPA coloured by region of the school atteneded for engineering students.", fig.align = "center", fig.width=16/2, fig.height=9/2}
ggplot(data = df, aes(x = gpa, y = salary, color = region)) +
    geom_point() +
    geom_smooth(method = "lm", se = FALSE ) +
    labs(x = "GPA", y = "Salaries") 
```

### Gender plots
Woman tend to have a higher GPA than the men, but have a lower correlation beween salaries and post-grad engineering salary, and a lower mean and median salary compared to men. 

```{r}
df %>% 
  group_by(gender) %>% 
  summarize(n = n(), 
            correlation = cor(salary, gpa),
            median_gpa = median(gpa),
            mean_gpa = mean(gpa),
            mean = mean(salary, na.rm = TRUE), 
            median = median(salary, na.rm = TRUE), 
            sd = sd(salary, na.rm = TRUE))
```

As visualized here the correlation between gpas and salaries by gender shows men make a fair amount more than woman on average.
```{r, fig.cap = "Figure 4. Relationship between salary and region coloured by gender of engineering students.", fig.align = "center", fig.width=16/2, fig.height=9/2}
ggplot(data = df, aes(x = gpa, y = salary, color = gender)) +
    geom_point() +
    geom_smooth(method = "lm", se = FALSE ) +
    labs(x = "GPA", y = "Salaries") 
```





